inputs:
  - name: nginx_log
    alert_count: 5
    paths:
      - /var/log/nginx/error.log
    include_lines: ['error', 'no live upstreams','upstream prematurely closed']

  - name: api.paisayaar.pk
    alert_count: 10
    paths:
      - /var/log/nginx/api.paisayaar.pk.access.log
    include_lines: [' 502 ']

  - name: pk-admin.jinglewill.pro
    alert_count: 10
    paths:
      - /var/log/nginx/pk-admin.jinglewill.pro.access.log
    include_lines: [' 502 ']
scan:
  frequency: 60

output:
  method: POST
  url: https://open.feishu.cn/open-apis/bot/v2/hook/baa43d2e-c330-4030-8449-466af5053847
  headers: {"Content-Type": "application/json",}
  format: json
  # å ä½ç¬¦ (${format_time}ï¼Œ{alert_results}ï¼Œ${triggered_keywords_results} æ—¥å¿—å‘Šè­¦è¡Œçš„å†…å®¹)
  body: >
    {
      "msg_type": "interactive",
      "card": {
        "header": {
          "title": {
            "content": "ğŸ›‘ **DIY æŠ¥è­¦å†…å®¹**",
            "tag": "lark_md"
          }
        },
        "elements": [
          {
            "tag": "div",
            "text": {
              "content": "**å‘Šè­¦æ—¶é—´:** ${format_time}",
              "tag": "lark_md"
            }
          },
          {
            "tag": "div",
            "text": {
              "content": "**å‘Šè­¦ç»Ÿè®¡:**\n<font color=\"green\">${alert_results}</font>",
              "tag": "lark_md"
            }
          },
          {
            "tag": "div",
            "text": {
              "content": "**è§¦å‘çš„å…³é”®å­—:**\n<font color=\"red\">${triggered_keywords_results}</font> \n <at email=wangqingshuai@doowintech.com></at>",
              "tag": "lark_md"
            }
          },
          {
            "tag": "div",
            "text": {
              "content": "----",
              "tag": "lark_md"
            }
          },
          {
            "tag": "div",
            "text": {
              "content": "âš ï¸ **æ³¨æ„äº‹é¡¹:**\n- è¯·å°½å¿«å¤„ç†\n- å¦‚æœæœ‰ç–‘é—®ï¼Œè¯·è”ç³»ç®¡ç†å‘˜ ",
              "tag": "lark_md"
            }
          }
        ]
      }
    }